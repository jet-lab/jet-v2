<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>MarginAccount | @jet-lab/margin - v0.2.7</title><meta name="description" content="Documentation for @jet-lab/margin - v0.2.7"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@jet-lab/margin - v0.2.7</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@jet-lab/margin - v0.2.7</a></li><li><a href="MarginAccount.html">MarginAccount</a></li></ul><h1>Class MarginAccount </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">MarginAccount</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="MarginAccount.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#address" class="tsd-kind-icon">address</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#info" class="tsd-kind-icon">info</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#owner" class="tsd-kind-icon">owner</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#poolPositions" class="tsd-kind-icon">pool<wbr/>Positions</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#pools" class="tsd-kind-icon">pools</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#positions-1" class="tsd-kind-icon">positions</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#programs" class="tsd-kind-icon">programs</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#provider" class="tsd-kind-icon">provider</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#seed" class="tsd-kind-icon">seed</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#summary" class="tsd-kind-icon">summary</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#valuation" class="tsd-kind-icon">valuation</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#walletTokens" class="tsd-kind-icon">wallet<wbr/>Tokens</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#RISK_CRITICAL_LEVEL" class="tsd-kind-icon">RISK_<wbr/>CRITICAL_<wbr/>LEVEL</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#RISK_LIQUIDATION_LEVEL" class="tsd-kind-icon">RISK_<wbr/>LIQUIDATION_<wbr/>LEVEL</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#RISK_WARNING_LEVEL" class="tsd-kind-icon">RISK_<wbr/>WARNING_<wbr/>LEVEL</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#SEED_MAX_VALUE" class="tsd-kind-icon">SEED_<wbr/>MAX_<wbr/>VALUE</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#SETUP_LEVERAGE_FRACTION" class="tsd-kind-icon">SETUP_<wbr/>LEVERAGE_<wbr/>FRACTION</a></li></ul></section><section class="tsd-index-section "><h3>Accessors</h3><ul class="tsd-index-list"><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#isBeingLiquidated" class="tsd-kind-icon">is<wbr/>Being<wbr/>Liquidated</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#liquidaton" class="tsd-kind-icon">liquidaton</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#liquidator" class="tsd-kind-icon">liquidator</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#riskIndicator" class="tsd-kind-icon">risk<wbr/>Indicator</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#closeAccount" class="tsd-kind-icon">close<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#closePosition" class="tsd-kind-icon">close<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#computeRiskIndicator" class="tsd-kind-icon">compute<wbr/>Risk<wbr/>Indicator</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#createAccount" class="tsd-kind-icon">create<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#exists" class="tsd-kind-icon">exists</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#findLiquidationAddress" class="tsd-kind-icon">find<wbr/>Liquidation<wbr/>Address</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#findMetadataAddress" class="tsd-kind-icon">find<wbr/>Metadata<wbr/>Address</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#findPositionTokenAddress" class="tsd-kind-icon">find<wbr/>Position<wbr/>Token<wbr/>Address</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getOrRegisterPosition" class="tsd-kind-icon">get<wbr/>Or<wbr/>Register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPosition" class="tsd-kind-icon">get<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPositionNullable" class="tsd-kind-icon">get<wbr/>Position<wbr/>Nullable</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPositionPrice" class="tsd-kind-icon">get<wbr/>Position<wbr/>Price</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPositions" class="tsd-kind-icon">get<wbr/>Positions</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getRemainingLiquidationTime" class="tsd-kind-icon">get<wbr/>Remaining<wbr/>Liquidation<wbr/>Time</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#hasAuthority" class="tsd-kind-icon">has<wbr/>Authority</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#liquidateEnd" class="tsd-kind-icon">liquidate<wbr/>End</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#refresh" class="tsd-kind-icon">refresh</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#refreshPositionMetadata" class="tsd-kind-icon">refresh<wbr/>Position<wbr/>Metadata</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#registerPosition" class="tsd-kind-icon">register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#sendAll" class="tsd-kind-icon">send<wbr/>All</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#sendAndConfirm" class="tsd-kind-icon">send<wbr/>And<wbr/>Confirm</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#setPositionBalance" class="tsd-kind-icon">set<wbr/>Position<wbr/>Balance</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#setPositionPrice" class="tsd-kind-icon">set<wbr/>Position<wbr/>Price</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#stopLiquidation" class="tsd-kind-icon">stop<wbr/>Liquidation</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#updateAllPositionBalances" class="tsd-kind-icon">update<wbr/>All<wbr/>Position<wbr/>Balances</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#updatePositionBalance" class="tsd-kind-icon">update<wbr/>Position<wbr/>Balance</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withAccountingInvoke" class="tsd-kind-icon">with<wbr/>Accounting<wbr/>Invoke</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withAdapterInvoke" class="tsd-kind-icon">with<wbr/>Adapter<wbr/>Invoke</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withCloseAccount" class="tsd-kind-icon">with<wbr/>Close<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withClosePosition" class="tsd-kind-icon">with<wbr/>Close<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withCreateAccount" class="tsd-kind-icon">with<wbr/>Create<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withGetOrRegisterPosition" class="tsd-kind-icon">with<wbr/>Get<wbr/>Or<wbr/>Register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withLiquidateEnd" class="tsd-kind-icon">with<wbr/>Liquidate<wbr/>End</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withRefreshPositionMetadata" class="tsd-kind-icon">with<wbr/>Refresh<wbr/>Position<wbr/>Metadata</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withRegisterPosition" class="tsd-kind-icon">with<wbr/>Register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withStopLiquidation" class="tsd-kind-icon">with<wbr/>Stop<wbr/>Liquidation</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withUpdateAllPositionBalances" class="tsd-kind-icon">with<wbr/>Update<wbr/>All<wbr/>Position<wbr/>Balances</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withUpdatePositionBalance" class="tsd-kind-icon">with<wbr/>Update<wbr/>Position<wbr/>Balance</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#createAccount-1" class="tsd-kind-icon">create<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#exists-1" class="tsd-kind-icon">exists</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#getUnusedAccountSeed" class="tsd-kind-icon">get<wbr/>Unused<wbr/>Account<wbr/>Seed</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#load" class="tsd-kind-icon">load</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#loadAllByOwner" class="tsd-kind-icon">load<wbr/>All<wbr/>By<wbr/>Owner</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#loadTokens" class="tsd-kind-icon">load<wbr/>Tokens</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link">constructor<a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new <wbr/>Margin<wbr/>Account<span class="tsd-signature-symbol">(</span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a>, provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span>, owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span>, seed<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span>, walletTokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L205">src/margin/marginAccount.ts:205</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Creates an instance of margin account.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>programs: <a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></h5></li><li><h5>provider: <span class="tsd-signature-type">AnchorProvider</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The provider and wallet that can sign for this margin account</p>
</div></div></li><li><h5>owner: <span class="tsd-signature-type">Address</span></h5></li><li><h5>seed: <span class="tsd-signature-type">number</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> pools: <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> walletTokens: <a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="address" class="tsd-anchor"></a><h3 class="tsd-anchor-link">address<a href="#address" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">address<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">PublicKey</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L139">src/margin/marginAccount.ts:139</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The address of the <a href="MarginAccount.html">MarginAccount</a></p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="info" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> info<a href="#info" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">info<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">{ </span>liquidationData<span class="tsd-signature-symbol">?: </span><a href="../modules.html#LiquidationData" class="tsd-signature-type" data-tsd-kind="Type alias">LiquidationData</a><span class="tsd-signature-symbol">; </span>marginAccount<span class="tsd-signature-symbol">: </span><a href="../modules.html#MarginAccountData" class="tsd-signature-type" data-tsd-kind="Type alias">MarginAccountData</a><span class="tsd-signature-symbol">; </span>positions<span class="tsd-signature-symbol">: </span><a href="../modules.html#AccountPositionList" class="tsd-signature-type" data-tsd-kind="Type alias">AccountPositionList</a><span class="tsd-signature-symbol"> }</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L129">src/margin/marginAccount.ts:129</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The raw accounts associated with the margin account.</p>
</div></div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> liquidation<wbr/>Data<span class="tsd-signature-symbol">?: </span><a href="../modules.html#LiquidationData" class="tsd-signature-type" data-tsd-kind="Type alias">LiquidationData</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The decoded <a href="../modules.html#LiquidationData">LiquidationData</a>. This may only be present during liquidation.</p>
</div></div></li><li class="tsd-parameter"><h5>margin<wbr/>Account<span class="tsd-signature-symbol">: </span><a href="../modules.html#MarginAccountData" class="tsd-signature-type" data-tsd-kind="Type alias">MarginAccountData</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The decoded <a href="../modules.html#MarginAccountData">MarginAccountData</a>.</p>
</div></div></li><li class="tsd-parameter"><h5>positions<span class="tsd-signature-symbol">: </span><a href="../modules.html#AccountPositionList" class="tsd-signature-type" data-tsd-kind="Type alias">AccountPositionList</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The decoded position data in the margin account.</p>
</div></div></li></ul></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="owner" class="tsd-anchor"></a><h3 class="tsd-anchor-link">owner<a href="#owner" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">owner<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">PublicKey</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L141">src/margin/marginAccount.ts:141</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The owner of the <a href="MarginAccount.html">MarginAccount</a></p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="poolPositions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">pool<wbr/>Positions<a href="#poolPositions" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">pool<wbr/>Positions<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/PoolPosition.html" class="tsd-signature-type" data-tsd-kind="Interface">PoolPosition</a><span class="tsd-signature-symbol">&gt;</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L145">src/margin/marginAccount.ts:145</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The summarized <a href="../interfaces/PoolPosition.html">PoolPosition</a> array of pool deposits and borrows.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="pools" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> pools<a href="#pools" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">pools<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="positions-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">positions<a href="#positions-1" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">positions<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">AccountPosition</span><span class="tsd-signature-symbol">[]</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L143">src/margin/marginAccount.ts:143</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The parsed [[AccountPosition]] array of the margin account.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="programs" class="tsd-anchor"></a><h3 class="tsd-anchor-link">programs<a href="#programs" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">programs<span class="tsd-signature-symbol">:</span> <a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="provider" class="tsd-anchor"></a><h3 class="tsd-anchor-link">provider<a href="#provider" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">provider<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">AnchorProvider</span></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="seed" class="tsd-anchor"></a><h3 class="tsd-anchor-link">seed<a href="#seed" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">seed<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="summary" class="tsd-anchor"></a><h3 class="tsd-anchor-link">summary<a href="#summary" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">summary<span class="tsd-signature-symbol">:</span> <a href="../interfaces/AccountSummary.html" class="tsd-signature-type" data-tsd-kind="Interface">AccountSummary</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L148">src/margin/marginAccount.ts:148</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="valuation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">valuation<a href="#valuation" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">valuation<span class="tsd-signature-symbol">:</span> <a href="../interfaces/Valuation.html" class="tsd-signature-type" data-tsd-kind="Interface">Valuation</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L147">src/margin/marginAccount.ts:147</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The <a href="../interfaces/Valuation.html">Valuation</a> of the margin account.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="walletTokens" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> wallet<wbr/>Tokens<a href="#walletTokens" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">wallet<wbr/>Tokens<span class="tsd-signature-symbol">?:</span> <a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="RISK_CRITICAL_LEVEL" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> <span class="tsd-flag ts-flagReadonly">Readonly</span> RISK_<wbr/>CRITICAL_<wbr/>LEVEL<a href="#RISK_CRITICAL_LEVEL" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">RISK_<wbr/>CRITICAL_<wbr/>LEVEL<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">0.9</span><span class="tsd-signature-symbol"> = 0.9</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L123">src/margin/marginAccount.ts:123</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="RISK_LIQUIDATION_LEVEL" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> <span class="tsd-flag ts-flagReadonly">Readonly</span> RISK_<wbr/>LIQUIDATION_<wbr/>LEVEL<a href="#RISK_LIQUIDATION_LEVEL" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">RISK_<wbr/>LIQUIDATION_<wbr/>LEVEL<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">1</span><span class="tsd-signature-symbol"> = 1</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L124">src/margin/marginAccount.ts:124</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="RISK_WARNING_LEVEL" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> <span class="tsd-flag ts-flagReadonly">Readonly</span> RISK_<wbr/>WARNING_<wbr/>LEVEL<a href="#RISK_WARNING_LEVEL" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">RISK_<wbr/>WARNING_<wbr/>LEVEL<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">0.8</span><span class="tsd-signature-symbol"> = 0.8</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L122">src/margin/marginAccount.ts:122</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="SEED_MAX_VALUE" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> <span class="tsd-flag ts-flagReadonly">Readonly</span> SEED_<wbr/>MAX_<wbr/>VALUE<a href="#SEED_MAX_VALUE" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">SEED_<wbr/>MAX_<wbr/>VALUE<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">65535</span><span class="tsd-signature-symbol"> = 65535</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L121">src/margin/marginAccount.ts:121</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The maximum <a href="MarginAccount.html">MarginAccount</a> seed value equal to <code>65535</code>.
Seeds are a 16 bit number and therefor only 2^16 margin accounts may exist per wallet.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="SETUP_LEVERAGE_FRACTION" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> <span class="tsd-flag ts-flagReadonly">Readonly</span> SETUP_<wbr/>LEVERAGE_<wbr/>FRACTION<a href="#SETUP_LEVERAGE_FRACTION" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">SETUP_<wbr/>LEVERAGE_<wbr/>FRACTION<span class="tsd-signature-symbol">:</span> <a href="Number128.html" class="tsd-signature-type" data-tsd-kind="Class">Number128</a><span class="tsd-signature-symbol"> = ...</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L126">src/margin/marginAccount.ts:126</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The maximum risk indicator allowed by the library when setting up a</p>
</div></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Accessors</h2><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="isBeingLiquidated" class="tsd-anchor"></a><h3 class="tsd-anchor-link">is<wbr/>Being<wbr/>Liquidated<a href="#isBeingLiquidated" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> isBeingLiquidated<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L161">src/margin/marginAccount.ts:161</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Returns true if a <a href="../modules.html#LiquidationData">LiquidationData</a> account exists and is associated with the <a href="MarginAccount.html">MarginAccount</a>.
Certain actions are not allowed while liquidation is in progress.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="liquidaton" class="tsd-anchor"></a><h3 class="tsd-anchor-link">liquidaton<a href="#liquidaton" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> liquidaton<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">PublicKey</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L154">src/margin/marginAccount.ts:154</a></li></ul></aside><div class="tsd-comment tsd-typography"><dl class="tsd-comment-tags"><dt>deprecated</dt><dd><p>Please use <code>marginAccount.info.liquidation</code> instead</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">PublicKey</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="liquidator" class="tsd-anchor"></a><h3 class="tsd-anchor-link">liquidator<a href="#liquidator" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> liquidator<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">PublicKey</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L150">src/margin/marginAccount.ts:150</a></li></ul></aside><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">PublicKey</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="riskIndicator" class="tsd-anchor"></a><h3 class="tsd-anchor-link">risk<wbr/>Indicator<a href="#riskIndicator" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> riskIndicator<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L172">src/margin/marginAccount.ts:172</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A qualitative measure of the the health of a margin account.
A higher value means more risk in a qualitative sense.
Properties:
 non-negative, range is [0, infinity)
 zero only when an account has no exposure at all
 account is subject to liquidation at a value of one</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="closeAccount" class="tsd-anchor"></a><h3 class="tsd-anchor-link">close<wbr/>Account<a href="#closeAccount" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">close<wbr/>Account<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1311">src/margin/marginAccount.ts:1311</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Send a transaction to close the <a href="MarginAccount.html">MarginAccount</a> and return rent to the owner.
All positions must have a zero balance and be closed first.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Close all positions. A non zero balance results in an error</span><br/><span class="hl-1">for</span><span class="hl-0"> (</span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">position</span><span class="hl-0"> </span><span class="hl-4">of</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">getPositions</span><span class="hl-0">()) {</span><br/><span class="hl-0">  </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">closePosition</span><span class="hl-0">(</span><span class="hl-2">position</span><span class="hl-0">)</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-8">// Close the account and send the transaction</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">closeAccount</span><span class="hl-0">()</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="closePosition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">close<wbr/>Position<a href="#closePosition" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">close<wbr/>Position<span class="tsd-signature-symbol">(</span>position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AccountPosition</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1378">src/margin/marginAccount.ts:1378</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Send a transaction to close a position. A non-zero balance will result in a transaction error.
There is a limited capacity for positions so it is recommended to close positions that
are no longer needed.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Load the pools</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">poolManager</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">PoolManager</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">provider</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><br/><span class="hl-8">// Get the SOL position</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">depositNoteMint</span><span class="hl-0"> = </span><span class="hl-2">pools</span><span class="hl-0">[</span><span class="hl-3">&quot;SOL&quot;</span><span class="hl-0">].</span><span class="hl-2">addresses</span><span class="hl-0">.</span><span class="hl-2">depositNoteMint</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">position</span><span class="hl-0"> = </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">getPosition</span><span class="hl-0">(</span><span class="hl-2">depositNoteMint</span><span class="hl-0">)</span><br/><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">closePosition</span><span class="hl-0">(</span><span class="hl-2">position</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>position: <span class="tsd-signature-type">AccountPosition</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="computeRiskIndicator" class="tsd-anchor"></a><h3 class="tsd-anchor-link">compute<wbr/>Risk<wbr/>Indicator<a href="#computeRiskIndicator" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">compute<wbr/>Risk<wbr/>Indicator<span class="tsd-signature-symbol">(</span>requiredCollateral<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, weightedCollateral<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, liabilities<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L181">src/margin/marginAccount.ts:181</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Compute the risk indicator using components from <a href="../interfaces/Valuation.html">Valuation</a></p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>requiredCollateral: <span class="tsd-signature-type">number</span></h5></li><li><h5>weightedCollateral: <span class="tsd-signature-type">number</span></h5></li><li><h5>liabilities: <span class="tsd-signature-type">number</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="createAccount" class="tsd-anchor"></a><h3 class="tsd-anchor-link">create<wbr/>Account<a href="#createAccount" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">create<wbr/>Account<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L922">src/margin/marginAccount.ts:922</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create the margin account if it does not exist.
If no seed is provided, one will be located.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-javascript"><span class="hl-8">// Load programs</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">config</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">MarginClient</span><span class="hl-0">.</span><span class="hl-6">getConfig</span><span class="hl-0">(</span><span class="hl-3">&quot;devnet&quot;</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">programs</span><span class="hl-0"> = </span><span class="hl-2">MarginClient</span><span class="hl-0">.</span><span class="hl-6">getPrograms</span><span class="hl-0">(</span><span class="hl-2">provider</span><span class="hl-0">, </span><span class="hl-2">config</span><span class="hl-0">)</span><br/><br/><span class="hl-8">// Load tokens and wallet</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">walletTokens</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">MarginAccount</span><span class="hl-0">.</span><span class="hl-6">loadTokens</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">walletPubkey</span><span class="hl-0">)</span><br/><br/><span class="hl-8">// Create margin account</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">marginAccount</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">MarginAccount</span><span class="hl-0">({</span><br/><span class="hl-0">   </span><span class="hl-2">programs</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-2">provider</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-2">walletPubkey</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-7">0</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-2">pools</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-2">walletTokens</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">createAccount</span><span class="hl-0">()</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="exists" class="tsd-anchor"></a><h3 class="tsd-anchor-link">exists<a href="#exists" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">exists<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L793">src/margin/marginAccount.ts:793</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Fetches the account and returns if it exists</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="findLiquidationAddress" class="tsd-anchor"></a><h3 class="tsd-anchor-link">find<wbr/>Liquidation<wbr/>Address<a href="#findLiquidationAddress" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">find<wbr/>Liquidation<wbr/>Address<span class="tsd-signature-symbol">(</span>liquidator<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L252">src/margin/marginAccount.ts:252</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Derive the address of a <a href="../modules.html#LiquidationData">LiquidationData</a> account.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>liquidator: <span class="tsd-signature-type">Address</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">PublicKey</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="findMetadataAddress" class="tsd-anchor"></a><h3 class="tsd-anchor-link">find<wbr/>Metadata<wbr/>Address<a href="#findMetadataAddress" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">find<wbr/>Metadata<wbr/>Address<span class="tsd-signature-symbol">(</span>account<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L268">src/margin/marginAccount.ts:268</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Derive the address of a metadata account.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>Some account types such as pools, adapters and position mints have
metadata associated with them. The metadata type is determined by the account type.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>account: <span class="tsd-signature-type">Address</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">PublicKey</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="findPositionTokenAddress" class="tsd-anchor"></a><h3 class="tsd-anchor-link">find<wbr/>Position<wbr/>Token<wbr/>Address<a href="#findPositionTokenAddress" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">find<wbr/>Position<wbr/>Token<wbr/>Address<span class="tsd-signature-symbol">(</span>positionTokenMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L285">src/margin/marginAccount.ts:285</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Derive the address of a position token account associated with a <a href="MarginAccount.html">MarginAccount</a>
and position token mint.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>It is recommended to use other functions to find specfic position types. e.g. using <a href="Pool.html">Pool</a>.findDepositPositionAddress</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>positionTokenMint: <span class="tsd-signature-type">Address</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">PublicKey</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="getOrRegisterPosition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">get<wbr/>Or<wbr/>Register<wbr/>Position<a href="#getOrRegisterPosition" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Or<wbr/>Register<wbr/>Position<span class="tsd-signature-symbol">(</span>tokenMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1140">src/margin/marginAccount.ts:1140</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get the [[AccountPosition]] [[PublicKey]] and sends a transaction to
create it if it doesn&#39;t exist.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>It is recommended to use other functions to register specfic position types. e.g. using <a href="Pool.html">Pool</a>.withRegisterDepositPosition</p>
<p>In web apps it&#39;s recommended to call <code>withGetOrCreatePosition</code> as part of a larger
transaction to prompt for a wallet signature less often.</p>

<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Load margin pools</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">poolManager</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">PoolManager</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">provider</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">depositNote</span><span class="hl-0"> = </span><span class="hl-2">pools</span><span class="hl-0">[</span><span class="hl-3">&quot;SOL&quot;</span><span class="hl-0">].</span><span class="hl-2">addresses</span><span class="hl-0">.</span><span class="hl-2">depositNoteMint</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">getOrRegisterPosition</span><span class="hl-0">(</span><span class="hl-2">depositNote</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>tokenMint: <span class="tsd-signature-type">Address</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="getPosition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">get<wbr/>Position<a href="#getPosition" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Position<span class="tsd-signature-symbol">(</span>mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AccountPosition</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L590">src/margin/marginAccount.ts:590</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get the registerd [[AccountPosition]] associated with the position mint.
Throws an error if the position does not exist.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>mint: <span class="tsd-signature-type">Address</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The position mint. For example a <a href="Pool.html">Pool</a> deposit note mint.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">AccountPosition</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="getPositionNullable" class="tsd-anchor"></a><h3 class="tsd-anchor-link">get<wbr/>Position<wbr/>Nullable<a href="#getPositionNullable" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Position<wbr/>Nullable<span class="tsd-signature-symbol">(</span>mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">AccountPosition</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L603">src/margin/marginAccount.ts:603</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get the registerd [[AccountPosition]] associated with the position mint.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>mint: <span class="tsd-signature-type">Address</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The position mint. For example a <a href="Pool.html">Pool</a> deposit note mint.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">AccountPosition</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="getPositionPrice" class="tsd-anchor"></a><h3 class="tsd-anchor-link">get<wbr/>Position<wbr/>Price<a href="#getPositionPrice" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Position<wbr/>Price<span class="tsd-signature-symbol">(</span>mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">PriceInfo</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L626">src/margin/marginAccount.ts:626</a></li></ul></aside><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>mint: <span class="tsd-signature-type">PublicKey</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">PriceInfo</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="getPositions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">get<wbr/>Positions<a href="#getPositions" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Positions<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AccountPosition</span><span class="tsd-signature-symbol">[]</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L574">src/margin/marginAccount.ts:574</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get the array of regstered [[AccountPosition]] on this account</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">AccountPosition</span><span class="tsd-signature-symbol">[]</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="getRemainingLiquidationTime" class="tsd-anchor"></a><h3 class="tsd-anchor-link">get<wbr/>Remaining<wbr/>Liquidation<wbr/>Time<a href="#getRemainingLiquidationTime" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Remaining<wbr/>Liquidation<wbr/>Time<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1502">src/margin/marginAccount.ts:1502</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get the time remaining on a liquidation until timeout in seconds.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>If <code>getRemainingLiquidationTime</code> is a negative number then <code>liquidationEnd</code> can be called
by the margin account owner regardless of the current margin account health.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">number</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="hasAuthority" class="tsd-anchor"></a><h3 class="tsd-anchor-link">has<wbr/>Authority<a href="#hasAuthority" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">has<wbr/>Authority<span class="tsd-signature-symbol">(</span>authority<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L643">src/margin/marginAccount.ts:643</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Check if the given address is an authority for this margin account.
The owner has authority, as well as a liquidator only during liquidation.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>authority: <span class="tsd-signature-type">PublicKey</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="liquidateEnd" class="tsd-anchor"></a><h3 class="tsd-anchor-link">liquidate<wbr/>End<a href="#liquidateEnd" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">liquidate<wbr/>End<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1449">src/margin/marginAccount.ts:1449</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Send a transaction to end a liquidation.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>The <a href="MarginAccount.html">MarginAccount</a> can enter liquidation while it&#39;s <code>riskIndicator</code> is at or above 1.0.
Liquidation is in progress when <code>isBeingLiquidated</code> returns true.
Liquidation can only end when enough collateral is deposited or enough collateral is liquidated to lower <code>riskIndicator</code> sufficiently.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="refresh" class="tsd-anchor"></a><h3 class="tsd-anchor-link">refresh<a href="#refresh" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">refresh<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L376">src/margin/marginAccount.ts:376</a></li></ul></aside><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="refreshPositionMetadata" class="tsd-anchor"></a><h3 class="tsd-anchor-link">refresh<wbr/>Position<wbr/>Metadata<a href="#refreshPositionMetadata" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">refresh<wbr/>Position<wbr/>Metadata<span class="tsd-signature-symbol">(</span>{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>positionMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1071">src/margin/marginAccount.ts:1071</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Sends a transaction to refresh the metadata for a position.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>When a position is registered some position mint metadata is copied to the position.
This data can become out of sync if the mint metadata is changed. Refreshing the position
metadata may at the benefit or detriment to the owner.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{: <span class="tsd-signature-symbol">{ </span>positionMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>positionMint }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>position<wbr/>Mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="registerPosition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">register<wbr/>Position<a href="#registerPosition" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">register<wbr/>Position<span class="tsd-signature-symbol">(</span>tokenMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1231">src/margin/marginAccount.ts:1231</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Sends a transaction to register an [[AccountPosition]] for the mint. When registering a <a href="Pool.html">Pool</a> position,
the mint would not be Bitcoin or SOL, but rather the <code>depositNoteMint</code> or <code>loanNoteMint</code> found in <code>pool.addresses</code>.
A margin account has a limited capacity of positions.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>It is recommended to use other functions to register specfic position types. e.g. using <a href="Pool.html">Pool</a>.withRegisterDepositPosition</p>
<p>In web apps it&#39;s is recommended to use <code>withRegisterPosition</code> as part of a larget transaction
to prompt for a wallet signature less often.</p>

<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Load the pools</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">poolManager</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">PoolManager</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">provider</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><br/><span class="hl-8">// Register the SOL deposit position</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">depositNoteMint</span><span class="hl-0"> = </span><span class="hl-2">pools</span><span class="hl-0">[</span><span class="hl-3">&quot;SOL&quot;</span><span class="hl-0">].</span><span class="hl-2">addresses</span><span class="hl-0">.</span><span class="hl-2">depositNoteMint</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">registerPosition</span><span class="hl-0">(</span><span class="hl-2">depositNoteMint</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>tokenMint: <span class="tsd-signature-type">Address</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="sendAll" class="tsd-anchor"></a><h3 class="tsd-anchor-link">send<wbr/>All<a href="#sendAll" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">send<wbr/>All<span class="tsd-signature-symbol">(</span>transactions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1661">src/margin/marginAccount.ts:1661</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Sends a collection of transactions using the <a href="MarginAccount.html">MarginAccount</a> [[AnchorProvider]].</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>This function has 2 additional features compared to <code>sendAll</code> from web3.js or anchor.</p>
<ul>
<li>Logging a [[Transaction]] error will include [[Transaction]] logs.</li>
<li>If an [[Transaction]] array element is itself a <code>TransactionInstruction[][]</code> this function will send those transactions in parallel.</li>
</ul>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>transactions: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">[]</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="sendAndConfirm" class="tsd-anchor"></a><h3 class="tsd-anchor-link">send<wbr/>And<wbr/>Confirm<a href="#sendAndConfirm" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">send<wbr/>And<wbr/>Confirm<span class="tsd-signature-symbol">(</span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span>, signers<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Signer</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1644">src/margin/marginAccount.ts:1644</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Sends a transaction using the <a href="MarginAccount.html">MarginAccount</a> [[AnchorProvider]]</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>instructions: <span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> signers: <span class="tsd-signature-type">Signer</span><span class="tsd-signature-symbol">[]</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="setPositionBalance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">set<wbr/>Position<wbr/>Balance<a href="#setPositionBalance" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">set<wbr/>Position<wbr/>Balance<span class="tsd-signature-symbol">(</span>mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span>, account<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span>, balance<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">BN</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">AccountPosition</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L614">src/margin/marginAccount.ts:614</a></li></ul></aside><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>mint: <span class="tsd-signature-type">PublicKey</span></h5></li><li><h5>account: <span class="tsd-signature-type">PublicKey</span></h5></li><li><h5>balance: <span class="tsd-signature-type">BN</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">AccountPosition</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="setPositionPrice" class="tsd-anchor"></a><h3 class="tsd-anchor-link">set<wbr/>Position<wbr/>Price<a href="#setPositionPrice" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">set<wbr/>Position<wbr/>Price<span class="tsd-signature-symbol">(</span>mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PublicKey</span>, price<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PriceInfo</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L635">src/margin/marginAccount.ts:635</a></li></ul></aside><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>mint: <span class="tsd-signature-type">PublicKey</span></h5></li><li><h5>price: <span class="tsd-signature-type">PriceInfo</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="stopLiquidation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">stop<wbr/>Liquidation<a href="#stopLiquidation" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">stop<wbr/>Liquidation<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1426">src/margin/marginAccount.ts:1426</a></li></ul></aside><div class="tsd-comment tsd-typography"><dl class="tsd-comment-tags"><dt>deprecated</dt><dd><p>This has been renamed to <code>liquidateEnd</code> and will be removed in a future release.</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="updateAllPositionBalances" class="tsd-anchor"></a><h3 class="tsd-anchor-link">update<wbr/>All<wbr/>Position<wbr/>Balances<a href="#updateAllPositionBalances" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">update<wbr/>All<wbr/>Position<wbr/>Balances<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L969">src/margin/marginAccount.ts:969</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Updates all position balances. <code>withUpdatePositionBalance</code> is often included
in transactions after modifying balances to synchronize with the margin account.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="updatePositionBalance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">update<wbr/>Position<wbr/>Balance<a href="#updatePositionBalance" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">update<wbr/>Position<wbr/>Balance<span class="tsd-signature-symbol">(</span>{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AccountPosition</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1004">src/margin/marginAccount.ts:1004</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Updates a single position balance. <code>withUpdatePositionBalance</code> is often included
in transactions after modifying balances to synchronize with the margin account.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{: <span class="tsd-signature-symbol">{ </span>position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AccountPosition</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>position }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AccountPosition</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withAccountingInvoke" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Accounting<wbr/>Invoke<a href="#withAccountingInvoke" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Accounting<wbr/>Invoke<span class="tsd-signature-symbol">(</span>{{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>adapterInstruction<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">; </span>adapterMetadata<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>adapterProgram<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1590">src/margin/marginAccount.ts:1590</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create an instruction to perform an action by invoking other adapter programs, allowing them only to
refresh the state of the margin account to be consistent with the actual
underlying prices or positions, but not permitting new position changes.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>This instruction is not invoked directly, but rather internally for example by <a href="Pool.html">Pool</a> when depositing.
Accounting invoke is necessary when several position values have to be refreshed but in the interim there
aren&#39;t enough fresh positions to satisfy margin requirements.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{{: <span class="tsd-signature-symbol">{ </span>adapterInstruction<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">; </span>adapterMetadata<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>adapterProgram<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<pre><code><span class="hl-11">instructions</span><span class="hl-0">: </span><span class="hl-2">TransactionInstruction</span><span class="hl-0">[]</span><br/><span class="hl-11">adapterProgram</span><span class="hl-0">: </span><span class="hl-2">Address</span><br/><span class="hl-11">adapterMetadata</span><span class="hl-0">: </span><span class="hl-2">Address</span><br/><span class="hl-11">adapterInstruction</span><span class="hl-0">: </span><span class="hl-2">TransactionInstruction</span>
</code></pre>
<p>  }} {
    instructions,
    adapterProgram,
    adapterMetadata,
    adapterInstruction
  }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>adapter<wbr/>Instruction<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span></h5></li><li class="tsd-parameter"><h5>adapter<wbr/>Metadata<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li><li class="tsd-parameter"><h5>adapter<wbr/>Program<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li><li class="tsd-parameter"><h5>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withAdapterInvoke" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Adapter<wbr/>Invoke<a href="#withAdapterInvoke" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Adapter<wbr/>Invoke<span class="tsd-signature-symbol">(</span>{{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>adapterInstruction<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">; </span>adapterMetadata<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>adapterProgram<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1541">src/margin/marginAccount.ts:1541</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create an instruction that performs an action by invoking other adapter programs, allowing them to alter
the balances of the token accounts belonging to this margin account. The transaction fails if the <a href="MarginAccount.html">MarginAccount</a>
does not have sufficent collateral.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>This instruction is not invoked directly, but rather internally for example by <a href="Pool.html">Pool</a> when depositing.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{{: <span class="tsd-signature-symbol">{ </span>adapterInstruction<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">; </span>adapterMetadata<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>adapterProgram<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<pre><code><span class="hl-11">instructions</span><span class="hl-0">: </span><span class="hl-2">TransactionInstruction</span><span class="hl-0">[]</span><br/><span class="hl-11">adapterProgram</span><span class="hl-0">: </span><span class="hl-2">Address</span><br/><span class="hl-11">adapterMetadata</span><span class="hl-0">: </span><span class="hl-2">Address</span><br/><span class="hl-11">adapterInstruction</span><span class="hl-0">: </span><span class="hl-2">TransactionInstruction</span>
</code></pre>
<p>  }} {
    instructions,
    adapterProgram,
    adapterMetadata,
    adapterInstruction
  }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>adapter<wbr/>Instruction<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span></h5></li><li class="tsd-parameter"><h5>adapter<wbr/>Metadata<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li><li class="tsd-parameter"><h5>adapter<wbr/>Program<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li><li class="tsd-parameter"><h5>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withCloseAccount" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Close<wbr/>Account<a href="#withCloseAccount" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Close<wbr/>Account<span class="tsd-signature-symbol">(</span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1340">src/margin/marginAccount.ts:1340</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create an instruction to close the <a href="MarginAccount.html">MarginAccount</a> and return rent to the owner.
All positions must have a zero balance and be closed first.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">instructions</span><span class="hl-0">: </span><span class="hl-10">TransactionInstruction</span><span class="hl-0">[] = []</span><br/><br/><span class="hl-8">// Close all positions. A non zero balance results in an error</span><br/><span class="hl-1">for</span><span class="hl-0"> (</span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">position</span><span class="hl-0"> </span><span class="hl-4">of</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">getPositions</span><span class="hl-0">()) {</span><br/><span class="hl-0">  </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">withClosePosition</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">, </span><span class="hl-2">position</span><span class="hl-0">)</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-8">// Close the account and send the transaction</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">withCloseAccount</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">sendAndConfirm</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>instructions: <span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withClosePosition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Close<wbr/>Position<a href="#withClosePosition" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Close<wbr/>Position<span class="tsd-signature-symbol">(</span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span>, position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AccountPosition</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1410">src/margin/marginAccount.ts:1410</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create an instruction to close a position. A non-zero balance will result in a transaction error.
There is a limited capacity for positions so it is recommended to close positions that
are no longer needed.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Load the pools</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">poolManager</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">PoolManager</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">provider</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><br/><span class="hl-8">// Get the SOL position</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">depositNoteMint</span><span class="hl-0"> = </span><span class="hl-2">pools</span><span class="hl-0">[</span><span class="hl-3">&quot;SOL&quot;</span><span class="hl-0">].</span><span class="hl-2">addresses</span><span class="hl-0">.</span><span class="hl-2">depositNoteMint</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">position</span><span class="hl-0"> = </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">getPosition</span><span class="hl-0">(</span><span class="hl-2">depositNoteMint</span><span class="hl-0">)</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">instructions</span><span class="hl-0">: </span><span class="hl-10">TransactionInstruction</span><span class="hl-0">[] = []</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">closePosition</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">, </span><span class="hl-2">position</span><span class="hl-0">)</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">sendAndConfirm</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>instructions: <span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li><li><h5>position: <span class="tsd-signature-type">AccountPosition</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withCreateAccount" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Create<wbr/>Account<a href="#withCreateAccount" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Create<wbr/>Account<span class="tsd-signature-symbol">(</span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L947">src/margin/marginAccount.ts:947</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get instruction to create the account if it does not exist.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">instructions</span><span class="hl-0">: </span><span class="hl-10">TransactionInstruction</span><span class="hl-0">[] = []</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">withCreateAccount</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span><br/><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">instructions</span><span class="hl-0">.</span><span class="hl-2">length</span><span class="hl-0"> &gt; </span><span class="hl-7">0</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">sendAndConfirm</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span><br/><span class="hl-0">}</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>instructions: <span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withGetOrRegisterPosition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Get<wbr/>Or<wbr/>Register<wbr/>Position<a href="#withGetOrRegisterPosition" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Get<wbr/>Or<wbr/>Register<wbr/>Position<span class="tsd-signature-symbol">(</span>args<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>positionTokenMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1188">src/margin/marginAccount.ts:1188</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get the [[AccountPosition]] [[PublicKey]] and appends an instructon to
create it if it doesn&#39;t exist.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>It is recommended to use other functions to register specfic position types. e.g. using <a href="Pool.html">Pool</a>.withRegisterDepositPosition</p>

<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Load margin pools</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">poolManager</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">PoolManager</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">provider</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><br/><span class="hl-8">// Register position</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">positionTokenMint</span><span class="hl-0"> = </span><span class="hl-2">pools</span><span class="hl-0">[</span><span class="hl-3">&quot;SOL&quot;</span><span class="hl-0">].</span><span class="hl-2">addresses</span><span class="hl-0">.</span><span class="hl-2">depositNoteMint</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">instructions</span><span class="hl-0">: </span><span class="hl-10">TransactionInstruction</span><span class="hl-0">[] = []</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">withGetOrRegisterPosition</span><span class="hl-0">({ </span><span class="hl-2">instructions</span><span class="hl-0">, </span><span class="hl-2">positionTokenMint</span><span class="hl-0"> })</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">sendAndConfirm</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>args: <span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>positionTokenMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The instructions to append to</p>
</div></div></li><li class="tsd-parameter"><h5>position<wbr/>Token<wbr/>Mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The position mint to register a position for</p>
</div></div></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withLiquidateEnd" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Liquidate<wbr/>End<a href="#withLiquidateEnd" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Liquidate<wbr/>End<span class="tsd-signature-symbol">(</span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1475">src/margin/marginAccount.ts:1475</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get instruction to end a liquidation</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>The <a href="MarginAccount.html">MarginAccount</a> can enter liquidation while it&#39;s <code>riskIndicator</code> is at or above 1.0.
Liquidation is in progress when <code>isBeingLiquidated</code> returns true.</p>

<a href="#authority" id="authority" style="color: inherit; text-decoration: none;">
  <h2>Authority</h2>
</a>
<p>The <a href="MarginAccount.html">MarginAccount</a>.<code>provider</code>.<code>wallet</code> will be used as the authority for the transaction.
The liquidator may end the liquidation at any time.
The margin account owner may end the liquidation only when at least one condition is true:</p>
<ol>
<li>When enough collateral is deposited or enough collateral is liquidated to lower <code>riskIndicator</code> sufficiently.</li>
<li>When the liquidation has timed out when <a href="MarginAccount.html">MarginAccount</a><code>.getRemainingLiquidationTime()</code> is negative</li>
</ol>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>instructions: <span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The instructions to append to</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withRefreshPositionMetadata" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Refresh<wbr/>Position<wbr/>Metadata<a href="#withRefreshPositionMetadata" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Refresh<wbr/>Position<wbr/>Metadata<span class="tsd-signature-symbol">(</span>{{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>positionMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1096">src/margin/marginAccount.ts:1096</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Creates an instruction to refresh the metadata for a position.</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>When a position is registered some position mint metadata is copied to the position.
This data can become out of sync if the mint metadata is changed. Refreshing the position
metadata may at the benefit or detriment to the owner.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{{: <span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>positionMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<pre><code><span class="hl-11">instructions</span><span class="hl-0">: </span><span class="hl-2">TransactionInstruction</span><span class="hl-0">[]</span><br/><span class="hl-11">positionMint</span><span class="hl-0">: </span><span class="hl-2">Address</span>
</code></pre>
<p>  }} {
    instructions,
    positionMint
  }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li><li class="tsd-parameter"><h5>position<wbr/>Mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withRegisterPosition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Register<wbr/>Position<a href="#withRegisterPosition" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Register<wbr/>Position<span class="tsd-signature-symbol">(</span>args<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>positionTokenMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1265">src/margin/marginAccount.ts:1265</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get instruction to register new position</p>
</div><div>
<a href="#remarks" id="remarks" style="color: inherit; text-decoration: none;">
  <h2>Remarks</h2>
</a>
<p>It is recommended to use other functions to register specfic position types. e.g. using <a href="Pool.html">Pool</a>.withRegisterDepositPosition</p>

<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Load the pools</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">poolManager</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">PoolManager</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">provider</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><br/><span class="hl-8">// Register the SOL deposit position</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">positionTokenMint</span><span class="hl-0"> = </span><span class="hl-2">pools</span><span class="hl-0">[</span><span class="hl-3">&quot;SOL&quot;</span><span class="hl-0">].</span><span class="hl-2">addresses</span><span class="hl-0">.</span><span class="hl-2">depositNoteMint</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">instructions</span><span class="hl-0">: </span><span class="hl-10">TransactionInstruction</span><span class="hl-0">[] = []</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">position</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">withRegisterPosition</span><span class="hl-0">({ </span><span class="hl-2">instructions</span><span class="hl-0">, </span><span class="hl-2">positionTokenMint</span><span class="hl-0"> })</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">sendAndConfirm</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>args: <span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>positionTokenMint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Instructions array to append to.</p>
</div></div></li><li class="tsd-parameter"><h5>position<wbr/>Token<wbr/>Mint<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The mint for the relevant token for the position</p>
</div></div></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">PublicKey</span><span class="tsd-signature-symbol">&gt;</span></h4><div><p>Returns the instruction, and the address of the token account to be created for the position.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withStopLiquidation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Stop<wbr/>Liquidation<a href="#withStopLiquidation" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Stop<wbr/>Liquidation<span class="tsd-signature-symbol">(</span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1433">src/margin/marginAccount.ts:1433</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get instruction to end a liquidation</p>
</div><dl class="tsd-comment-tags"><dt>deprecated</dt><dd><p>This has been renamed to <code>withLiquidateEnd</code> and will be removed in a future release.</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>instructions: <span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withUpdateAllPositionBalances" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Update<wbr/>All<wbr/>Position<wbr/>Balances<a href="#withUpdateAllPositionBalances" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Update<wbr/>All<wbr/>Position<wbr/>Balances<span class="tsd-signature-symbol">(</span>{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L990">src/margin/marginAccount.ts:990</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create instructions to update all position balances. <code>withUpdatePositionBalance</code> often included in
transactions after modifying balances ot synchronize with the margin account.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">instructions</span><span class="hl-0">: </span><span class="hl-10">TransactionInstruction</span><span class="hl-0">[] = []</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">withUpdateAllPositionBalances</span><span class="hl-0">({ </span><span class="hl-2">instructions</span><span class="hl-0"> })</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">sendAndConfirm</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{: <span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>instructions }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="withUpdatePositionBalance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">with<wbr/>Update<wbr/>Position<wbr/>Balance<a href="#withUpdatePositionBalance" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">with<wbr/>Update<wbr/>Position<wbr/>Balance<span class="tsd-signature-symbol">(</span>{{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L1041">src/margin/marginAccount.ts:1041</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Get instruction to update the accounting for assets in
the custody of the margin account.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-ts"><span class="hl-8">// Load the pools</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">poolManager</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">PoolManager</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">provider</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><br/><span class="hl-8">// Find the position</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">depositNote</span><span class="hl-0"> = </span><span class="hl-2">pools</span><span class="hl-0">[</span><span class="hl-3">&quot;SOL&quot;</span><span class="hl-0">].</span><span class="hl-2">addresses</span><span class="hl-0">.</span><span class="hl-2">depositNoteMint</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">position</span><span class="hl-0"> = </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">getPosition</span><span class="hl-0">(</span><span class="hl-2">depositNote</span><span class="hl-0">).</span><span class="hl-2">address</span><br/><br/><span class="hl-8">// Update the position balance</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">instructions</span><span class="hl-0">: </span><span class="hl-10">TransactionInstruction</span><span class="hl-0">[] = []</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">withUpdatePositionBalance</span><span class="hl-0">({ </span><span class="hl-2">instructions</span><span class="hl-0">, </span><span class="hl-2">position</span><span class="hl-0"> })</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">marginAccount</span><span class="hl-0">.</span><span class="hl-6">sendAndConfirm</span><span class="hl-0">(</span><span class="hl-2">instructions</span><span class="hl-0">)</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{{: <span class="tsd-signature-symbol">{ </span>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<pre><code><span class="hl-11">instructions</span><span class="hl-0">: </span><span class="hl-2">TransactionInstruction</span><span class="hl-0">[]</span><br/><span class="hl-11">position</span><span class="hl-0">: </span><span class="hl-2">Address</span>
</code></pre>
<p>  }} {
    instructions,
    position
  }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>instructions<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TransactionInstruction</span><span class="tsd-signature-symbol">[]</span></h5></li><li class="tsd-parameter"><h5>position<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div><p>{Promise<void>}</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-static"><a id="createAccount-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> create<wbr/>Account<a href="#createAccount-1" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-static"><li class="tsd-signature tsd-kind-icon">create<wbr/>Account<span class="tsd-signature-symbol">(</span>args<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol">; </span>seed<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span>walletTokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L834">src/margin/marginAccount.ts:834</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create the margin account if it does not exist.
If no seed is provided, one will be located.</p>
</div><div>
<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h2>Example</h2>
</a>
<pre><code class="language-javascript"><span class="hl-8">// Load programs</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">config</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">MarginClient</span><span class="hl-0">.</span><span class="hl-6">getConfig</span><span class="hl-0">(</span><span class="hl-3">&quot;devnet&quot;</span><span class="hl-0">)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">programs</span><span class="hl-0"> = </span><span class="hl-2">MarginClient</span><span class="hl-0">.</span><span class="hl-6">getPrograms</span><span class="hl-0">(</span><span class="hl-2">provider</span><span class="hl-0">, </span><span class="hl-2">config</span><span class="hl-0">)</span><br/><br/><span class="hl-8">// Load tokens and wallet</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">pools</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">poolManager</span><span class="hl-0">.</span><span class="hl-6">loadAll</span><span class="hl-0">()</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">walletTokens</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">MarginAccount</span><span class="hl-0">.</span><span class="hl-6">loadTokens</span><span class="hl-0">(</span><span class="hl-2">programs</span><span class="hl-0">, </span><span class="hl-2">walletPubkey</span><span class="hl-0">)</span><br/><br/><span class="hl-8">// Create margin account</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">marginAccount</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">MarginAccount</span><span class="hl-0">.</span><span class="hl-6">createAccount</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">programs</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">provider</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">owner:</span><span class="hl-0"> </span><span class="hl-2">wallet</span><span class="hl-0">.</span><span class="hl-2">publicKey</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">seed:</span><span class="hl-0"> </span><span class="hl-7">0</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">pools</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">walletTokens</span><br/><span class="hl-0">})</span>
</code></pre>
</div><dl class="tsd-comment-tags"><dt>static</dt><dd></dd><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>args: <span class="tsd-signature-symbol">{ </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol">; </span>seed<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span>walletTokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol"> }</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The address of the <a href="MarginAccount.html">MarginAccount</a> owner</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>A <a href="Pool.html">Pool</a> collection to calculate pool positions.</p>
</div></div></li><li class="tsd-parameter"><h5>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></h5></li><li class="tsd-parameter"><h5>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>A provider that may be used to sign transactions modifying the account</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> seed<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The seed or ID of the <a href="MarginAccount.html">MarginAccount</a> in the range of (0, 65535]</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> wallet<wbr/>Tokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The tokens in the owners wallet to determine max trade amounts.</p>
</div></div></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-static"><a id="exists-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> exists<a href="#exists-1" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-static"><li class="tsd-signature tsd-kind-icon">exists<span class="tsd-signature-symbol">(</span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a>, owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span>, seed<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L780">src/margin/marginAccount.ts:780</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Fetches the account and returns if it exists.</p>
</div><dl class="tsd-comment-tags"><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>programs: <a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></h5></li><li><h5>owner: <span class="tsd-signature-type">Address</span></h5></li><li><h5>seed: <span class="tsd-signature-type">number</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-static"><a id="getUnusedAccountSeed" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> get<wbr/>Unused<wbr/>Account<wbr/>Seed<a href="#getUnusedAccountSeed" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-static"><li class="tsd-signature tsd-kind-icon">get<wbr/>Unused<wbr/>Account<wbr/>Seed<span class="tsd-signature-symbol">(</span>{{<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L868">src/margin/marginAccount.ts:868</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Searches for a margin account that does not exist yet and returns its seed.</p>
</div><dl class="tsd-comment-tags"><dt>static</dt><dd></dd><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{{: <span class="tsd-signature-symbol">{ </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<pre><code><span class="hl-11">programs</span><span class="hl-0">: </span><span class="hl-2">MarginPrograms</span><br/><span class="hl-11">provider</span><span class="hl-0">: </span><span class="hl-2">AnchorProvider</span><br/><span class="hl-11">owner</span><span class="hl-0">: </span><span class="hl-2">Address</span>
</code></pre>
<p>  }}</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li><li class="tsd-parameter"><h5>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></h5></li><li class="tsd-parameter"><h5>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-static"><a id="load" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> load<a href="#load" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-static"><li class="tsd-signature tsd-kind-icon">load<span class="tsd-signature-symbol">(</span>args<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol">; </span>seed<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span>walletTokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L301">src/margin/marginAccount.ts:301</a></li></ul></aside><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>args: <span class="tsd-signature-symbol">{ </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol">; </span>seed<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span>walletTokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol"> }</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Collection of <a href="Pool.html">Pool</a> to calculate pool positions and prices.</p>
</div></div></li><li class="tsd-parameter"><h5>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></h5></li><li class="tsd-parameter"><h5>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The provider and wallet that can sign for this margin account</p>
</div></div></li><li class="tsd-parameter"><h5>seed<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></h5></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> wallet<wbr/>Tokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Tokens owned by the wallet to calculate max deposit amounts.</p>
</div></div></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a><span class="tsd-signature-symbol">&gt;</span></h4><div></div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-static"><a id="loadAllByOwner" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> load<wbr/>All<wbr/>By<wbr/>Owner<a href="#loadAllByOwner" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-static"><li class="tsd-signature tsd-kind-icon">load<wbr/>All<wbr/>By<wbr/>Owner<span class="tsd-signature-symbol">(</span>{({<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span>filters<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">GetProgramAccountsFilter</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol">; </span>walletTokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L341">src/margin/marginAccount.ts:341</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Load all margin accounts for a wallet with an optional filter.</p>
</div><dl class="tsd-comment-tags"><dt>static</dt><dd></dd><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>{({: <span class="tsd-signature-symbol">{ </span>filters<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">GetProgramAccountsFilter</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">; </span>pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a><span class="tsd-signature-symbol">; </span>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span><span class="tsd-signature-symbol">; </span>walletTokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<pre><code><span class="hl-11">programs</span><span class="hl-0">: </span><span class="hl-2">MarginPrograms</span><br/><span class="hl-11">provider</span><span class="hl-0">: </span><span class="hl-2">AnchorProvider</span><br/><span class="hl-2">pools</span><span class="hl-0">?: </span><span class="hl-2">Record</span><span class="hl-0">&lt;</span><span class="hl-2">string</span><span class="hl-0">, </span><span class="hl-2">Pool</span><span class="hl-0">&gt;</span><br/><span class="hl-2">walletTokens</span><span class="hl-0">?: </span><span class="hl-2">MarginWalletTokens</span><br/><span class="hl-2">filters</span><span class="hl-0">?: </span><span class="hl-2">GetProgramAccountsFilter</span><span class="hl-0">[] | </span><span class="hl-2">Buffer</span>
</code></pre>
<p>  })} {
    programs,
    provider,
    pools,
    walletTokens,
    filters
  }</p>
</div></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> filters<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">GetProgramAccountsFilter</span><span class="tsd-signature-symbol">[]</span></h5></li><li class="tsd-parameter"><h5>owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span></h5></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> pools<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="Pool.html" class="tsd-signature-type" data-tsd-kind="Class">Pool</a><span class="tsd-signature-symbol">&gt;</span></h5></li><li class="tsd-parameter"><h5>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></h5></li><li class="tsd-parameter"><h5>provider<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AnchorProvider</span></h5></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> wallet<wbr/>Tokens<span class="tsd-signature-symbol">?: </span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a></h5></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="MarginAccount.html" class="tsd-signature-type" data-tsd-kind="Class">MarginAccount</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-static"><a id="loadTokens" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> load<wbr/>Tokens<a href="#loadTokens" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-static"><li class="tsd-signature tsd-kind-icon">load<wbr/>Tokens<span class="tsd-signature-symbol">(</span>programs<span class="tsd-signature-symbol">: </span><a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a>, owner<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Address</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jet-lab/jet-v2/blob/ac8a970/libraries/ts/src/margin/marginAccount.ts#L741">src/margin/marginAccount.ts:741</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Loads all tokens in the users wallet.
Provides an array and a map of tokens mapped by pool.</p>
</div><dl class="tsd-comment-tags"><dt>static</dt><dd></dd><dt>memberof</dt><dd><p>MarginAccount</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>programs: <a href="../interfaces/MarginPrograms.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginPrograms</a></h5></li><li><h5>owner: <span class="tsd-signature-type">Address</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/MarginWalletTokens.html" class="tsd-signature-type" data-tsd-kind="Interface">MarginWalletTokens</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class"><a href="MarginAccount.html" class="tsd-kind-icon">Margin<wbr/>Account</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="MarginAccount.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#address" class="tsd-kind-icon">address</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#info" class="tsd-kind-icon">info</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#owner" class="tsd-kind-icon">owner</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#poolPositions" class="tsd-kind-icon">pool<wbr/>Positions</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#pools" class="tsd-kind-icon">pools</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#positions-1" class="tsd-kind-icon">positions</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#programs" class="tsd-kind-icon">programs</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#provider" class="tsd-kind-icon">provider</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#seed" class="tsd-kind-icon">seed</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#summary" class="tsd-kind-icon">summary</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#valuation" class="tsd-kind-icon">valuation</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="MarginAccount.html#walletTokens" class="tsd-kind-icon">wallet<wbr/>Tokens</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#RISK_CRITICAL_LEVEL" class="tsd-kind-icon">RISK_<wbr/>CRITICAL_<wbr/>LEVEL</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#RISK_LIQUIDATION_LEVEL" class="tsd-kind-icon">RISK_<wbr/>LIQUIDATION_<wbr/>LEVEL</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#RISK_WARNING_LEVEL" class="tsd-kind-icon">RISK_<wbr/>WARNING_<wbr/>LEVEL</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#SEED_MAX_VALUE" class="tsd-kind-icon">SEED_<wbr/>MAX_<wbr/>VALUE</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#SETUP_LEVERAGE_FRACTION" class="tsd-kind-icon">SETUP_<wbr/>LEVERAGE_<wbr/>FRACTION</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#isBeingLiquidated" class="tsd-kind-icon">is<wbr/>Being<wbr/>Liquidated</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#liquidaton" class="tsd-kind-icon">liquidaton</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#liquidator" class="tsd-kind-icon">liquidator</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="MarginAccount.html#riskIndicator" class="tsd-kind-icon">risk<wbr/>Indicator</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#closeAccount" class="tsd-kind-icon">close<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#closePosition" class="tsd-kind-icon">close<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#computeRiskIndicator" class="tsd-kind-icon">compute<wbr/>Risk<wbr/>Indicator</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#createAccount" class="tsd-kind-icon">create<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#exists" class="tsd-kind-icon">exists</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#findLiquidationAddress" class="tsd-kind-icon">find<wbr/>Liquidation<wbr/>Address</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#findMetadataAddress" class="tsd-kind-icon">find<wbr/>Metadata<wbr/>Address</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#findPositionTokenAddress" class="tsd-kind-icon">find<wbr/>Position<wbr/>Token<wbr/>Address</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getOrRegisterPosition" class="tsd-kind-icon">get<wbr/>Or<wbr/>Register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPosition" class="tsd-kind-icon">get<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPositionNullable" class="tsd-kind-icon">get<wbr/>Position<wbr/>Nullable</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPositionPrice" class="tsd-kind-icon">get<wbr/>Position<wbr/>Price</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getPositions" class="tsd-kind-icon">get<wbr/>Positions</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#getRemainingLiquidationTime" class="tsd-kind-icon">get<wbr/>Remaining<wbr/>Liquidation<wbr/>Time</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#hasAuthority" class="tsd-kind-icon">has<wbr/>Authority</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#liquidateEnd" class="tsd-kind-icon">liquidate<wbr/>End</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#refresh" class="tsd-kind-icon">refresh</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#refreshPositionMetadata" class="tsd-kind-icon">refresh<wbr/>Position<wbr/>Metadata</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#registerPosition" class="tsd-kind-icon">register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#sendAll" class="tsd-kind-icon">send<wbr/>All</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#sendAndConfirm" class="tsd-kind-icon">send<wbr/>And<wbr/>Confirm</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#setPositionBalance" class="tsd-kind-icon">set<wbr/>Position<wbr/>Balance</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#setPositionPrice" class="tsd-kind-icon">set<wbr/>Position<wbr/>Price</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#stopLiquidation" class="tsd-kind-icon">stop<wbr/>Liquidation</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#updateAllPositionBalances" class="tsd-kind-icon">update<wbr/>All<wbr/>Position<wbr/>Balances</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#updatePositionBalance" class="tsd-kind-icon">update<wbr/>Position<wbr/>Balance</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withAccountingInvoke" class="tsd-kind-icon">with<wbr/>Accounting<wbr/>Invoke</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withAdapterInvoke" class="tsd-kind-icon">with<wbr/>Adapter<wbr/>Invoke</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withCloseAccount" class="tsd-kind-icon">with<wbr/>Close<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withClosePosition" class="tsd-kind-icon">with<wbr/>Close<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withCreateAccount" class="tsd-kind-icon">with<wbr/>Create<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withGetOrRegisterPosition" class="tsd-kind-icon">with<wbr/>Get<wbr/>Or<wbr/>Register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withLiquidateEnd" class="tsd-kind-icon">with<wbr/>Liquidate<wbr/>End</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withRefreshPositionMetadata" class="tsd-kind-icon">with<wbr/>Refresh<wbr/>Position<wbr/>Metadata</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withRegisterPosition" class="tsd-kind-icon">with<wbr/>Register<wbr/>Position</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withStopLiquidation" class="tsd-kind-icon">with<wbr/>Stop<wbr/>Liquidation</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withUpdateAllPositionBalances" class="tsd-kind-icon">with<wbr/>Update<wbr/>All<wbr/>Position<wbr/>Balances</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="MarginAccount.html#withUpdatePositionBalance" class="tsd-kind-icon">with<wbr/>Update<wbr/>Position<wbr/>Balance</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#createAccount-1" class="tsd-kind-icon">create<wbr/>Account</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#exists-1" class="tsd-kind-icon">exists</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#getUnusedAccountSeed" class="tsd-kind-icon">get<wbr/>Unused<wbr/>Account<wbr/>Seed</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#load" class="tsd-kind-icon">load</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#loadAllByOwner" class="tsd-kind-icon">load<wbr/>All<wbr/>By<wbr/>Owner</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><a href="MarginAccount.html#loadTokens" class="tsd-kind-icon">load<wbr/>Tokens</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>